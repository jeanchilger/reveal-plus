Collimator optimization in SPECT based on a joint detection and localization task. In SPECT the collimator is a crucial element of the imaging chain and controls the noise-resolution tradeoff of the collected data. Optimizing collimator design has been a long studied topic, with many different criteria used to evaluate the design. One class of criteria is task based, in which the collimator is designed to optimize detection of a signal (lesion). Here we consider a new, more realistic task, the joint detection and localization of a signal. Furthermore, we use an ideal observer-one that attains a theoretically maximum task performance-to optimize collimator design. The ideal observer operates on the sinogram data. We consider a family of parallel-hole low-energy collimators of varying resolution and efficiency and optimize over this set. We observe that for a 2D object characterized by noise due to background variability and a sinogram with photon noise, the optimal collimator tends to be of lower resolution and higher efficiency than equivalent commercial collimators. Furthermore, this optimal design is insensitive to the tolerance radius within which the signal must be localized. So for this scenario, the addition of a localization task does not change the optimal collimator. Optimal collimator resolution gets worse as signal size grows, and improves as the level of background variability noise increases. These latter two trends are also observed when the detection task is signal-known-exactly and background variable.